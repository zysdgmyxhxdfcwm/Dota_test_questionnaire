<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dota 2 Draft Questionnaire</title>
<style>
body { font-family: Arial, sans-serif; background:#1a1a1a; color:#fff; margin:20px; }
h2 { text-align:center; }
.question { margin-bottom:50px; padding:20px; border:1px solid #444; border-radius:8px; }
.draft-section { display:flex; justify-content:space-between; margin:10px 0; }
.team { width:48%; }
.team h3 { text-align:center; margin-bottom:10px; }
.heroes-row { display:flex; justify-content:center; flex-wrap:wrap; gap:10px; }
.hero { width:64px; height:36px; position:relative; }
.hero img { width:100%; height:100%; border-radius:4px; border:2px solid transparent; transition: transform 0.2s, border 0.2s; }
.hero img:hover { transform: scale(1.2); z-index:1; }
.pick img { border-color: gold; box-shadow:0 0 10px gold; }
.options { margin-top:10px; }
.options label { margin-right:15px; cursor:pointer; }
button { margin-top:20px; padding:10px 20px; font-size:16px; border:none; border-radius:5px; background:gold; color:#000; cursor:pointer; }
</style>
</head>
<body>

<h2>请对下面的阵容打分</h2>
<div id="questionnaire"></div>
<button id="submitBtn">提交</button>

<script>
async function loadQuestionnaire() {
  const draftRes = await fetch("draft_results.json");
  const drafts = await draftRes.json();

  const heroesRes = await fetch("heroes.json");
  const heroes = await heroesRes.json();

  const container = document.getElementById("questionnaire");

  drafts.forEach((draft, index) => {
    const qDiv = document.createElement("div");
    qDiv.className = "question";
    qDiv.id = `question-${index}`;

    // 标题
    const h3 = document.createElement("h3");
    h3.textContent = `题目 ${index+1}: ${draft.id}`;
    qDiv.appendChild(h3);

    // Pick 阶段（上方）
    const pickSection = document.createElement("div");
    pickSection.className = "draft-section";
    ["R","D"].forEach(team=>{
      const teamDiv = document.createElement("div");
      teamDiv.className = "team";
      const teamName = document.createElement("h3");
      teamName.textContent = team==="R"?"Radiant Pick":"Dire Pick";
      teamDiv.appendChild(teamName);

      const row = document.createElement("div");
      row.className="heroes-row";

      draft[team].forEach(heroItem=>{
        const key = heroItem.hero_name.toLowerCase().replace(/\s+/g,"_");
        const heroData = heroes[key];
        if(!heroData) return;
        const heroDiv = document.createElement("div");
        heroDiv.className = "hero pick";
        const img = document.createElement("img");
        img.src = heroData.image;
        img.title = heroData.name;
        heroDiv.appendChild(img);
        row.appendChild(heroDiv);
      });

      teamDiv.appendChild(row);
      pickSection.appendChild(teamDiv);
    }));
    qDiv.appendChild(pickSection);

    // Ban 阶段（下方）
    const banSection = document.createElement("div");
    banSection.className="draft-section";
    ["R","D"].forEach(team=>{
      const teamDiv = document.createElement("div");
      teamDiv.className="team";
      const teamName = document.createElement("h3");
      teamName.textContent = team==="R"?"Radiant Ban":"Dire Ban";
      teamDiv.appendChild(teamName);

      const row = document.createElement("div");
      row.className="heroes-row";

      draft.B[team].forEach(heroId=>{
        const heroData = Object.values(heroes).find(h=>h.id===heroId);
        if(!heroData) return;
        const heroDiv = document.createElement("div");
        heroDiv.className = "hero";
        const img = document.createElement("img");
        img.src = heroData.image;
        img.title = heroData.name;
        heroDiv.appendChild(img);
        row.appendChild(heroDiv);
      });

      teamDiv.appendChild(row);
      banSection.appendChild(teamDiv);
    }));
    qDiv.appendChild(banSection);

    // 选项
    const optionsDiv = document.createElement("div");
    optionsDiv.className="options";
    ["A. Radiant一边倒","B. Radiant略有优势","C. 势均力敌","D. Dire略有优势","E. Dire一边倒"].forEach((text,i)=>{
      const label = document.createElement("label");
      const input = document.createElement("input");
      input.type="radio";
      input.name=`question-${index}`;
      input.value=String.fromCharCode(65+i);
      label.appendChild(input);
      label.appendChild(document.createTextNode(text));
      optionsDiv.appendChild(label);
    });
    qDiv.appendChild(optionsDiv);

    container.appendChild(qDiv);
  });
}

function collectResults() {
  const questions = document.querySelectorAll(".question");
  const results = [];
  questions.forEach(q=>{
    const id = q.querySelector("h3").textContent.split(":")[1].trim();
    const selected = q.querySelector("input[type=radio]:checked");
    results.push({
      id,
      answer: selected? selected.value : null
    });
  });
  console.log("问卷结果:", results);
  alert("已提交，结果已打印到控制台");
}

document.getElementById("submitBtn").addEventListener("click", collectResults);

loadQuestionnaire();
</script>
</body>
</html>
