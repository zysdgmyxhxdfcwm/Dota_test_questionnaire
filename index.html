<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dota 2 Draft Visualization</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1a1a1a;
      color: #fff;
      margin: 20px;
    }
    h2 {
      text-align: center;
    }
    .draft-section {
      display: flex;
      justify-content: space-between;
      margin: 20px 0;
    }
    .team {
      width: 48%;
    }
    .team h3 {
      text-align: center;
      margin-bottom: 10px;
    }
    .heroes-row {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    .hero {
      width: 64px;
      height: 36px;
      position: relative;
    }
    .hero img {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      border: 2px solid transparent;
      transition: transform 0.2s, border 0.2s;
    }
    .hero img:hover {
      transform: scale(1.2);
      z-index: 1;
    }
    .model-hero img {
      border-color: gold;
      box-shadow: 0 0 10px gold;
    }
  </style>
</head>
<body>

  <h2>Dota 2 Draft Visualization</h2>

  <div id="ban-section" class="draft-section">
    <div class="team" id="radiant-ban">
      <h3>Radiant Ban</h3>
      <div class="heroes-row"></div>
    </div>
    <div class="team" id="dire-ban">
      <h3>Dire Ban</h3>
      <div class="heroes-row"></div>
    </div>
  </div>

  <div id="pick-section" class="draft-section">
    <div class="team" id="radiant-pick">
      <h3>Radiant Pick</h3>
      <div class="heroes-row"></div>
    </div>
    <div class="team" id="dire-pick">
      <h3>Dire Pick</h3>
      <div class="heroes-row"></div>
    </div>
  </div>

  <script>
    async function loadData() {
      const draftRes = await fetch("draft_results.json");
      const draft = await draftRes.json();

      const heroesRes = await fetch("heroes.json");
      const heroes = await heroesRes.json();

      function renderHeroes(containerId, heroArray, isPick=false) {
        const container = document.querySelector(`#${containerId} .heroes-row`);
        container.innerHTML = "";

        heroArray.forEach(heroItem => {
          let heroData;
          if(isPick) {
            // Pick 阶段只存 hero_id
            heroData = Object.values(heroes).find(h => h.id === heroItem);
          } else {
            // Ban 阶段用 hero_name
            const key = heroItem.hero_name.toLowerCase().replace(/\s+/g, "_");
            heroData = heroes[key];
          }

          if(!heroData) return;

          const div = document.createElement("div");
          div.className = "hero";
          if(!isPick && heroItem.source === "model") div.classList.add("model-hero");

          const img = document.createElement("img");
          img.src = heroData.image;
          img.title = heroData.name;

          div.appendChild(img);
          container.appendChild(div);
        });
      }

      // Ban 阶段
      renderHeroes("radiant-ban", draft.R);
      renderHeroes("dire-ban", draft.D);

      // Pick 阶段
      renderHeroes("radiant-pick", draft.B.R, true);
      renderHeroes("dire-pick", draft.B.D, true);
    }

    loadData();
  </script>

</body>
</html>
